<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analisador Loto F√°cil</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4109036947367584" crossorigin="anonymous"></script>
</head>
<body class="theme-light">
    <div class="container">
        <header class="header">
            <div class="header-content">
                <img src="Logo_01.png" alt="Logo" class="logo">
                <div class="header-text">
                    <h1 class="title">
                        <span class="icon">üé≤</span>
                        Analisador Estat√≠stico da Loto F√°cil
                    </h1>
                    <p class="subtitle">An√°lise inteligente baseada nos √∫ltimos sorteios</p>
                </div>
            </div>
            <button id="toggleTheme" class="theme-toggle" aria-label="Alternar tema claro/escuro" title="Alternar tema">
                <span class="theme-icon">üåô</span>
            </button>
        </header>

        <main class="main-content">
            <form id="sorteioForm" class="form">
                <div class="form-group">
                    <div class="label-row">
                        <label for="sorteio1" class="label">
                            <span class="label-number">1</span>
                            Sorteio 1 (15 n√∫meros, separados por v√≠rgula)
                        </label>
                        <span class="contador-numeros" id="contador1">0/15</span>
                        <button type="button" class="btn-limpar-campo" data-campo="sorteio1" title="Limpar campo">üóëÔ∏è</button>
                    </div>
                    <input 
                        type="text" 
                        id="sorteio1" 
                        class="input"
                        placeholder="Ex: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15"
                        aria-label="Sorteio 1, digite 15 n√∫meros separados por v√≠rgula"
                    >
                    <div class="seletor-numeros" data-target="sorteio1"></div>
                </div>

                <div class="form-group">
                    <div class="label-row">
                        <label for="sorteio2" class="label">
                            <span class="label-number">2</span>
                            Sorteio 2 (15 n√∫meros, separados por v√≠rgula)
                        </label>
                        <span class="contador-numeros" id="contador2">0/15</span>
                        <button type="button" class="btn-limpar-campo" data-campo="sorteio2" title="Limpar campo">üóëÔ∏è</button>
                    </div>
                    <input 
                        type="text" 
                        id="sorteio2" 
                        class="input"
                        placeholder="Ex: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15"
                        aria-label="Sorteio 2, digite 15 n√∫meros separados por v√≠rgula"
                    >
                    <div class="seletor-numeros" data-target="sorteio2"></div>
                </div>

                <div class="form-group">
                    <div class="label-row">
                        <label for="sorteio3" class="label">
                            <span class="label-number">3</span>
                            Sorteio 3 (15 n√∫meros, separados por v√≠rgula)
                        </label>
                        <span class="contador-numeros" id="contador3">0/15</span>
                        <button type="button" class="btn-limpar-campo" data-campo="sorteio3" title="Limpar campo">üóëÔ∏è</button>
                    </div>
                    <input 
                        type="text" 
                        id="sorteio3" 
                        class="input"
                        placeholder="Ex: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15"
                        aria-label="Sorteio 3, digite 15 n√∫meros separados por v√≠rgula"
                    >
                    <div class="seletor-numeros" data-target="sorteio3"></div>
                </div>

                <div class="form-group">
                    <div class="label-row">
                        <label for="resultadoAtual" class="label">
                            <span class="label-number">‚úì</span>
                            Resultado do Jogo Atual (15 n√∫meros, separados por v√≠rgula)
                        </label>
                        <span class="contador-numeros" id="contador4">0/15</span>
                        <button type="button" class="btn-limpar-campo" data-campo="resultadoAtual" title="Limpar campo">üóëÔ∏è</button>
                    </div>
                    <input 
                        type="text" 
                        id="resultadoAtual" 
                        class="input"
                        placeholder="Ex: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15"
                        aria-label="Resultado do jogo atual, digite 15 n√∫meros separados por v√≠rgula"
                    >
                    <div class="seletor-numeros" data-target="resultadoAtual"></div>
                </div>

                <div class="form-group">
                    <label for="modoGeracao" class="label">
                        <span class="label-number">‚öôÔ∏è</span>
                        Modo de Gera√ß√£o
                    </label>
                    <select id="modoGeracao" class="select-box" aria-label="Selecione o modo de gera√ß√£o">
                        <option value="balanceado">Balanceado (Padr√£o)</option>
                        <option value="conservador">Conservador (Prioriza frequ√™ncia)</option>
                        <option value="agressivo">Agressivo (Prioriza n√∫meros frios)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="quantidadeJogos" class="label">
                        <span class="label-number">üé≤</span>
                        Quantidade de Jogos a Gerar
                    </label>
                    <select id="quantidadeJogos" class="select-box" aria-label="Selecione quantidade de jogos">
                        <option value="1">1 Jogo</option>
                        <option value="2">2 Jogos</option>
                        <option value="3">3 Jogos</option>
                    </select>
                </div>

                <div class="form-group avancado-section">
                    <div class="avancado-header">
                        <label class="label">
                            <span class="label-number">üéØ</span>
                            Op√ß√µes Avan√ßadas
                        </label>
                        <button type="button" class="btn-toggle" id="toggleAvancado" aria-expanded="false">
                            <span>Mostrar</span>
                            <span class="toggle-icon">‚ñº</span>
                        </button>
                    </div>
                    <div id="opcoesAvancadas" class="opcoes-avancadas hidden">
                        <div class="filtro-numeros">
                            <label>N√∫meros a Excluir (opcional):</label>
                            <div id="numerosExcluir" class="numeros-grid-filtro">
                                <!-- Ser√° preenchido via JavaScript -->
                            </div>
                        </div>
                        <div class="filtro-numeros">
                            <label>N√∫meros a Incluir (opcional):</label>
                            <div id="numerosIncluir" class="numeros-grid-filtro">
                                <!-- Ser√° preenchido via JavaScript -->
                            </div>
                        </div>
                        <button type="button" class="btn-limpar-filtros" id="limparFiltros">Limpar Filtros</button>
                    </div>
                </div>

                <button type="submit" class="btn-gerar" id="btnGerar" data-inicialmente-desabilitado="true">
                    <span class="btn-text">Gerar Jogos</span>
                    <span class="btn-icon">üéØ</span>
                </button>
            </form>

            <div class="instrucoes-container">
                <h3 class="instrucoes-title">üìñ Como Funciona</h3>
                <div class="instrucoes-content">
                    <ol class="instrucoes-lista">
                        <li>Preencha os <strong>3 √∫ltimos sorteios</strong> da Loto F√°cil (15 n√∫meros cada). Voc√™ pode digitar os n√∫meros separados por v√≠rgula ou usar os <strong>bot√µes num√©ricos</strong> abaixo de cada campo para sele√ß√£o visual.</li>
                        <li>Informe o <strong>resultado do jogo atual</strong> (√∫ltimo sorteio realizado) com 15 n√∫meros.</li>
                        <li>Escolha o <strong>modo de gera√ß√£o</strong>: Balanceado (padr√£o), Conservador (prioriza frequ√™ncia) ou Agressivo (prioriza n√∫meros frios).</li>
                        <li>Selecione a <strong>quantidade de jogos</strong> que deseja gerar.</li>
                        <li><strong>Opcional:</strong> Use as <strong>Op√ß√µes Avan√ßadas</strong> para excluir ou incluir n√∫meros espec√≠ficos na gera√ß√£o.</li>
                        <li>Clique em <strong>"Gerar Jogos"</strong> para obter as sugest√µes. Use o bot√£o <strong>"üìã Copiar"</strong> em cada jogo para copiar os n√∫meros.</li>
                    </ol>
                    
                    <div class="instrucoes-algoritmo">
                        <p><strong>Algoritmo:</strong> O sistema analisa os padr√µes dos √∫ltimos sorteios, priorizando n√∫meros que n√£o foram sorteados no resultado atual e que apareceram com maior frequ√™ncia nos sorteios anteriores. O modo selecionado ajusta os pesos do algoritmo para diferentes estrat√©gias.</p>
                    </div>
                    
                    <div class="instrucoes-funcionalidades">
                        <h4>‚ú® Funcionalidades Dispon√≠veis:</h4>
                        <ul class="funcionalidades-lista">
                            <li><strong>üìã Hist√≥rico:</strong> Acesse todos os jogos gerados anteriormente atrav√©s do bot√£o "Hist√≥rico" nos resultados.</li>
                            <li><strong>üìä Estat√≠sticas:</strong> Visualize gr√°ficos de frequ√™ncia e an√°lises avan√ßadas (distribui√ß√£o por dezenas, pares/√≠mpares, sequ√™ncias consecutivas) ap√≥s gerar os jogos.</li>
                            <li><strong>üìÑ Exportar:</strong> Exporte seus jogos em PDF ou imagem (PNG) usando os bot√µes de exporta√ß√£o.</li>
                            <li><strong>üåô Tema:</strong> Alterne entre tema claro e escuro usando o bot√£o no canto superior direito.</li>
                            <li><strong>üìä Dashboard:</strong> Acompanhe seu uso di√°rio, total de jogos gerados e estat√≠sticas atrav√©s do bot√£o "Dashboard" no rodap√©.</li>
                            <li><strong>‚å®Ô∏è Atalhos:</strong> Use <kbd>Enter</kbd> para gerar jogos e <kbd>ESC</kbd> para fechar modais.</li>
                            <li><strong>üóëÔ∏è Limpar:</strong> Use os bot√µes de limpar em cada campo ou limpe todo o hist√≥rico atrav√©s do bot√£o "Limpar Dados" no rodap√©.</li>
                        </ul>
                    </div>
                    
                </div>
                
                <div class="aviso-container">
                    <div class="aviso-header">
                        <span class="aviso-icon">‚ö†Ô∏è</span>
                        <h4 class="aviso-title">Aviso Importante</h4>
                    </div>
                    <div class="aviso-content">
                        <p><strong>Este aplicativo n√£o garante acertos nos resultados da Loto F√°cil.</strong></p>
                        <p>O sistema realiza uma <strong>an√°lise estat√≠stica e probabil√≠stica</strong> baseada nos padr√µes hist√≥ricos dos sorteios informados. Os n√∫meros sugeridos s√£o apenas indica√ß√µes calculadas matematicamente e n√£o representam garantia de acerto no pr√≥ximo sorteio.</p>
                        <p>Os jogos de loteria s√£o baseados em sorteio aleat√≥rio e cada combina√ß√£o possui a mesma probabilidade matem√°tica de ser sorteada.</p>
                    </div>
                </div>
            </div>

            <div id="resultadoContainer" class="resultado-container hidden">
                <div class="resultado-header-actions">
                    <h2 class="resultado-title">N√∫meros Sugeridos</h2>
                    <div class="resultado-buttons">
                        <button type="button" class="btn-acao" id="exportarPDF" title="Exportar jogos em PDF">
                            <span>üìÑ</span> PDF
                        </button>
                        <button type="button" class="btn-acao" id="exportarImagem" title="Exportar jogos como imagem">
                            <span>üñºÔ∏è</span> Imagem
                        </button>
                        <button type="button" class="btn-acao" id="verHistorico" title="Ver hist√≥rico de jogos">
                            <span>üìã</span> Hist√≥rico
                        </button>
                    </div>
                </div>
                <div id="jogosGerados">
                    <!-- Jogos ser√£o inseridos aqui via JavaScript -->
                </div>
                <div class="resultado-info">
                    <p class="info-text">
                        <span class="info-icon">‚ÑπÔ∏è</span>
                        Sugest√£o baseada em n√∫meros n√£o sorteados no resultado atual 
                        e frequ√™ncia acima da m√©dia nos √∫ltimos 3 sorteios.
                    </p>
                </div>
            </div>

            <div id="estatisticasContainer" class="estatisticas-container hidden">
                <h2 class="estatisticas-title">üìä Estat√≠sticas dos √öltimos Sorteios</h2>
                
                <div class="grafico-frequencia-container">
                    <h3 class="grafico-title">Gr√°fico de Frequ√™ncia</h3>
                    <div id="graficoFrequencia" class="grafico-frequencia">
                        <!-- Ser√° preenchido via JavaScript -->
                    </div>
                </div>

                <div class="estatisticas-grid">
                    <div class="estatistica-box mais-sorteados">
                        <h3 class="estatistica-box-title">üî• N√∫meros Mais Sorteados</h3>
                        <div id="maisSorteados" class="estatistica-tabela">
                            <!-- Ser√° preenchido via JavaScript -->
                        </div>
                    </div>
                    <div class="estatistica-box menos-sorteados">
                        <h3 class="estatistica-box-title">‚ùÑÔ∏è N√∫meros Menos Sorteados</h3>
                        <div id="menosSorteados" class="estatistica-tabela">
                            <!-- Ser√° preenchido via JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="analises-avancadas">
                    <h3 class="analises-title">üìà An√°lises Avan√ßadas</h3>
                    <div class="analises-grid">
                        <div class="analise-box">
                            <h4>üìä Distribui√ß√£o por Dezenas</h4>
                            <div id="distribuicaoDezenas"></div>
                        </div>
                        <div class="analise-box">
                            <h4>‚öñÔ∏è Pares vs √çmpares</h4>
                            <div id="paresImpares"></div>
                        </div>
                        <div class="analise-box">
                            <h4>üî¢ Sequ√™ncias Consecutivas</h4>
                            <div id="sequenciasConsecutivas"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="historicoModal" class="modal hidden" role="dialog" aria-labelledby="historicoTitle" aria-hidden="true">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 id="historicoTitle">üìã Hist√≥rico de Jogos Gerados</h2>
                        <button class="modal-close" id="fecharHistorico" aria-label="Fechar hist√≥rico">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div id="historicoLista"></div>
                        <button type="button" class="btn-limpar-historico" id="limparHistorico">Limpar Hist√≥rico</button>
                    </div>
                </div>
            </div>

            <div id="dashboardModal" class="modal hidden" role="dialog" aria-labelledby="dashboardTitle" aria-hidden="true">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 id="dashboardTitle">üìä Dashboard de Uso</h2>
                        <button class="modal-close" id="fecharDashboard" aria-label="Fechar dashboard">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div id="dashboardContent"></div>
                    </div>
                </div>
            </div>

            <div id="errorMessage" class="error-message hidden"></div>
        </main>

        <footer class="footer">
            <div class="footer-content">
                <p>Desenvolvido por: Andr√© Luiz Coutinho (COUTIINOVATION)</p>
                <div class="footer-actions">
                    <button type="button" class="btn-footer" id="btnDashboard" title="Ver dashboard de uso">üìä Dashboard</button>
                    <button type="button" class="btn-footer" id="btnLimparDados" title="Limpar todos os dados">üóëÔ∏è Limpar Dados</button>
                </div>
            </div>
        </footer>
    </div>

    <!-- Script para detectar e bloquear modo an√¥nimo ANTES do script principal -->
    <script>
        (function() {
            'use strict';
            
            // Detecta modo an√¥nimo usando m√∫ltiplas t√©cnicas
            function isModoAnonimo() {
                try {
                    // T√©cnica 1: Teste b√°sico de escrita/leitura
                    var testKey1 = '__anon_check1__' + Date.now();
                    var testVal1 = 'test_' + Math.random();
                    localStorage.setItem(testKey1, testVal1);
                    var retrieved1 = localStorage.getItem(testKey1);
                    localStorage.removeItem(testKey1);
                    if (retrieved1 !== testVal1) {
                        return true;
                    }
                    
                    // T√©cnica 2: Teste de persist√™ncia
                    var testKey2 = '__anon_check2__';
                    var testVal2 = 'persist_' + Date.now();
                    localStorage.setItem(testKey2, testVal2);
                    var retrieved2 = localStorage.getItem(testKey2);
                    localStorage.removeItem(testKey2);
                    if (retrieved2 !== testVal2) {
                        return true;
                    }
                    
                    // T√©cnica 3: Teste sessionStorage
                    try {
                        var testKey3 = '__anon_check3__' + Date.now();
                        var testVal3 = 'session_' + Math.random();
                        sessionStorage.setItem(testKey3, testVal3);
                        var retrieved3 = sessionStorage.getItem(testKey3);
                        sessionStorage.removeItem(testKey3);
                        if (retrieved3 !== testVal3) {
                            return true;
                        }
                    } catch (e) {
                        return true;
                    }
                    
                    // T√©cnica 4: Verificar se localStorage realmente persiste
                    // Em modo an√¥nimo, alguns navegadores permitem escrita mas n√£o persistem
                    var persistKey = '__persist_verify__';
                    var persistVal = 'verify_' + Date.now();
                    localStorage.setItem(persistKey, persistVal);
                    // Pequeno delay para verificar persist√™ncia
                    var checkVal = localStorage.getItem(persistKey);
                    localStorage.removeItem(persistKey);
                    if (checkVal !== persistVal) {
                        return true;
                    }
                    
                    return false;
                } catch (e) {
                    // Qualquer erro = modo an√¥nimo
                    return true;
                }
            }
            
            // Fun√ß√£o para bloquear o bot√£o completamente
            function bloquearBotao() {
                var btnGerar = document.getElementById('btnGerar');
                if (btnGerar) {
                    // For√ßa o bot√£o a ficar desabilitado usando m√∫ltiplas t√©cnicas
                    btnGerar.disabled = true;
                    btnGerar.setAttribute('disabled', 'disabled');
                    btnGerar.removeAttribute('data-inicialmente-desabilitado');
                    btnGerar.classList.add('btn-bloqueado');
                    btnGerar.style.pointerEvents = 'none';
                    btnGerar.style.opacity = '0.6';
                    btnGerar.style.cursor = 'not-allowed';
                    
                    // Tenta interceptar a propriedade disabled
                    try {
                        if (!btnGerar._anonimoBloqueado) {
                            btnGerar._anonimoBloqueado = true;
                            var originalDisabled = Object.getOwnPropertyDescriptor(HTMLButtonElement.prototype, 'disabled');
                            if (originalDisabled) {
                                Object.defineProperty(btnGerar, 'disabled', {
                                    get: function() { return true; },
                                    set: function() { return; },
                                    configurable: false
                                });
                            }
                        }
                    } catch (e) {
                        // Se n√£o conseguir interceptar, continua com outras t√©cnicas
                    }
                    
                    var btnText = btnGerar.querySelector('.btn-text');
                    if (btnText) {
                        btnText.textContent = 'Janela An√¥nima N√£o Suportada';
                    }
                    
                    // Bloqueia tamb√©m o formul√°rio
                    var form = document.getElementById('sorteioForm');
                    if (form && !form._anonimoBloqueado) {
                        form._anonimoBloqueado = true;
                        form.addEventListener('submit', function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            e.stopImmediatePropagation();
                            bloquearBotao(); // Refor√ßa o bloqueio
                            return false;
                        }, true);
                    }
                }
                
                // Exibe mensagem de erro
                var errorMessage = document.getElementById('errorMessage');
                if (errorMessage) {
                    errorMessage.textContent = '‚ö†Ô∏è Este aplicativo n√£o funciona em janela an√¥nima/privada. Por favor, use uma janela normal do navegador para utilizar o aplicativo.';
                    errorMessage.classList.remove('hidden');
                }
                
            }
            
            // Verifica e bloqueia imediatamente
            function verificarEBloquear() {
                if (isModoAnonimo()) {
                    bloquearBotao();
                    return true;
                }
                return false;
            }
            
            // Executa verifica√ß√£o imediatamente
            var bloqueado = verificarEBloquear();
            
            // Quando DOM estiver pronto
            function quandoDOMPronto() {
                if (!bloqueado) {
                    bloqueado = verificarEBloquear();
                }
                
                // Usa MutationObserver para garantir que o bot√£o sempre fique bloqueado
                if (bloqueado) {
                    var observer = new MutationObserver(function(mutations) {
                        var btnGerar = document.getElementById('btnGerar');
                        if (btnGerar && !btnGerar.disabled) {
                            bloquearBotao();
                        }
                    });
                    
                    var targetNode = document.body;
                    if (targetNode) {
                        observer.observe(targetNode, {
                            childList: true,
                            subtree: true,
                            attributes: true,
                            attributeFilter: ['disabled']
                        });
                    }
                }
            }
            
            // Executa quando DOM estiver pronto
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', quandoDOMPronto);
            } else {
                quandoDOMPronto();
            }
            
            // Verifica√ß√µes peri√≥dicas para garantir bloqueio (a cada 200ms)
            setInterval(function() {
                if (isModoAnonimo()) {
                    bloquearBotao();
                }
            }, 200);
            
            // Verifica√ß√µes adicionais em intervalos espec√≠ficos
            setTimeout(function() {
                if (isModoAnonimo()) {
                    bloquearBotao();
                }
            }, 50);
            setTimeout(function() {
                if (isModoAnonimo()) {
                    bloquearBotao();
                }
            }, 100);
            setTimeout(function() {
                if (isModoAnonimo()) {
                    bloquearBotao();
                }
            }, 500);
            setTimeout(function() {
                if (isModoAnonimo()) {
                    bloquearBotao();
                }
            }, 1000);
        })();
    </script>
    <script src="script.js"></script>
</body>
</html>

